{"version":3,"sources":["vs/editor/contrib/hover/browser/hoverAccessibleViews.ts"],"names":[],"mappings":"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","file":"hoverAccessibleViews.js","sourceRoot":"file:///Users/kw/github/monaco-editor-core/out-editor-esm","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../../nls.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ContentHoverController } from './contentHoverController.js';\nimport { AccessibleViewType, AccessibleViewProviderId, AccessibleContentProvider, IAccessibleViewContentProvider, IAccessibleViewOptions } from '../../../../platform/accessibility/browser/accessibleView.js';\nimport { IAccessibleViewImplementation } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { HoverVerbosityAction } from '../../../common/languages.js';\nimport { DECREASE_HOVER_VERBOSITY_ACCESSIBLE_ACTION_ID, DECREASE_HOVER_VERBOSITY_ACTION_ID, INCREASE_HOVER_VERBOSITY_ACCESSIBLE_ACTION_ID, INCREASE_HOVER_VERBOSITY_ACTION_ID } from './hoverActionIds.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Action, IAction } from '../../../../base/common/actions.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { labelForHoverVerbosityAction } from './markdownHoverParticipant.js';\n\nnamespace HoverAccessibilityHelpNLS {\n\texport const increaseVerbosity = localize('increaseVerbosity', '- The focused hover part verbosity level can be increased with the Increase Hover Verbosity command.', `<keybinding:${INCREASE_HOVER_VERBOSITY_ACTION_ID}>`);\n\texport const decreaseVerbosity = localize('decreaseVerbosity', '- The focused hover part verbosity level can be decreased with the Decrease Hover Verbosity command.', `<keybinding:${DECREASE_HOVER_VERBOSITY_ACTION_ID}>`);\n}\n\nexport class HoverAccessibleView implements IAccessibleViewImplementation {\n\n\tpublic readonly type = AccessibleViewType.View;\n\tpublic readonly priority = 95;\n\tpublic readonly name = 'hover';\n\tpublic readonly when = EditorContextKeys.hoverFocused;\n\n\tgetProvider(accessor: ServicesAccessor): AccessibleContentProvider | undefined {\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst codeEditor = codeEditorService.getActiveCodeEditor() || codeEditorService.getFocusedCodeEditor();\n\t\tif (!codeEditor) {\n\t\t\tthrow new Error('No active or focused code editor');\n\t\t}\n\t\tconst hoverController = ContentHoverController.get(codeEditor);\n\t\tif (!hoverController) {\n\t\t\treturn;\n\t\t}\n\t\tconst keybindingService = accessor.get(IKeybindingService);\n\t\treturn accessor.get(IInstantiationService).createInstance(HoverAccessibleViewProvider, keybindingService, codeEditor, hoverController);\n\t}\n}\n\nexport class HoverAccessibilityHelp implements IAccessibleViewImplementation {\n\n\tpublic readonly priority = 100;\n\tpublic readonly name = 'hover';\n\tpublic readonly type = AccessibleViewType.Help;\n\tpublic readonly when = EditorContextKeys.hoverVisible;\n\n\tgetProvider(accessor: ServicesAccessor): AccessibleContentProvider | undefined {\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst codeEditor = codeEditorService.getActiveCodeEditor() || codeEditorService.getFocusedCodeEditor();\n\t\tif (!codeEditor) {\n\t\t\tthrow new Error('No active or focused code editor');\n\t\t}\n\t\tconst hoverController = ContentHoverController.get(codeEditor);\n\t\tif (!hoverController) {\n\t\t\treturn;\n\t\t}\n\t\treturn accessor.get(IInstantiationService).createInstance(HoverAccessibilityHelpProvider, hoverController);\n\t}\n}\n\nabstract class BaseHoverAccessibleViewProvider extends Disposable implements IAccessibleViewContentProvider {\n\n\tabstract provideContent(): string;\n\tabstract options: IAccessibleViewOptions;\n\n\tpublic readonly id = AccessibleViewProviderId.Hover;\n\tpublic readonly verbositySettingKey = 'accessibility.verbosity.hover';\n\n\tprivate readonly _onDidChangeContent: Emitter<void> = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeContent: Event<void> = this._onDidChangeContent.event;\n\n\tprotected _focusedHoverPartIndex: number = -1;\n\n\tconstructor(protected readonly _hoverController: ContentHoverController) {\n\t\tsuper();\n\t}\n\n\tpublic onOpen(): void {\n\t\tif (!this._hoverController) {\n\t\t\treturn;\n\t\t}\n\t\tthis._hoverController.shouldKeepOpenOnEditorMouseMoveOrLeave = true;\n\t\tthis._focusedHoverPartIndex = this._hoverController.focusedHoverPartIndex();\n\t\tthis._register(this._hoverController.onHoverContentsChanged(() => {\n\t\t\tthis._onDidChangeContent.fire();\n\t\t}));\n\t}\n\n\tpublic onClose(): void {\n\t\tif (!this._hoverController) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._focusedHoverPartIndex === -1) {\n\t\t\tthis._hoverController.focus();\n\t\t} else {\n\t\t\tthis._hoverController.focusHoverPartWithIndex(this._focusedHoverPartIndex);\n\t\t}\n\t\tthis._focusedHoverPartIndex = -1;\n\t\tthis._hoverController.shouldKeepOpenOnEditorMouseMoveOrLeave = false;\n\t}\n\n\tprovideContentAtIndex(focusedHoverIndex: number, includeVerbosityActions: boolean): string {\n\t\tif (focusedHoverIndex !== -1) {\n\t\t\tconst accessibleContent = this._hoverController.getAccessibleWidgetContentAtIndex(focusedHoverIndex);\n\t\t\tif (accessibleContent === undefined) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tconst contents: string[] = [];\n\t\t\tif (includeVerbosityActions) {\n\t\t\t\tcontents.push(...this._descriptionsOfVerbosityActionsForIndex(focusedHoverIndex));\n\t\t\t}\n\t\t\tcontents.push(accessibleContent);\n\t\t\treturn contents.join('\\n');\n\t\t} else {\n\t\t\tconst accessibleContent = this._hoverController.getAccessibleWidgetContent();\n\t\t\tif (accessibleContent === undefined) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tconst contents: string[] = [];\n\t\t\tcontents.push(accessibleContent);\n\t\t\treturn contents.join('\\n');\n\t\t}\n\t}\n\n\tprivate _descriptionsOfVerbosityActionsForIndex(index: number): string[] {\n\t\tconst content: string[] = [];\n\t\tconst descriptionForIncreaseAction = this._descriptionOfVerbosityActionForIndex(HoverVerbosityAction.Increase, index);\n\t\tif (descriptionForIncreaseAction !== undefined) {\n\t\t\tcontent.push(descriptionForIncreaseAction);\n\t\t}\n\t\tconst descriptionForDecreaseAction = this._descriptionOfVerbosityActionForIndex(HoverVerbosityAction.Decrease, index);\n\t\tif (descriptionForDecreaseAction !== undefined) {\n\t\t\tcontent.push(descriptionForDecreaseAction);\n\t\t}\n\t\treturn content;\n\t}\n\n\tprivate _descriptionOfVerbosityActionForIndex(action: HoverVerbosityAction, index: number): string | undefined {\n\t\tconst isActionSupported = this._hoverController.doesHoverAtIndexSupportVerbosityAction(index, action);\n\t\tif (!isActionSupported) {\n\t\t\treturn;\n\t\t}\n\t\tswitch (action) {\n\t\t\tcase HoverVerbosityAction.Increase:\n\t\t\t\treturn HoverAccessibilityHelpNLS.increaseVerbosity;\n\t\t\tcase HoverVerbosityAction.Decrease:\n\t\t\t\treturn HoverAccessibilityHelpNLS.decreaseVerbosity;\n\t\t}\n\t}\n}\n\nexport class HoverAccessibilityHelpProvider extends BaseHoverAccessibleViewProvider implements IAccessibleViewContentProvider {\n\n\tpublic readonly options: IAccessibleViewOptions = { type: AccessibleViewType.Help };\n\n\tconstructor(hoverController: ContentHoverController) {\n\t\tsuper(hoverController);\n\t}\n\n\tprovideContent(): string {\n\t\treturn this.provideContentAtIndex(this._focusedHoverPartIndex, true);\n\t}\n}\n\nexport class HoverAccessibleViewProvider extends BaseHoverAccessibleViewProvider implements IAccessibleViewContentProvider {\n\n\tpublic readonly options: IAccessibleViewOptions = { type: AccessibleViewType.View };\n\n\tconstructor(\n\t\tprivate readonly _keybindingService: IKeybindingService,\n\t\tprivate readonly _editor: ICodeEditor,\n\t\thoverController: ContentHoverController,\n\t) {\n\t\tsuper(hoverController);\n\t\tthis._initializeOptions(this._editor, hoverController);\n\t}\n\n\tpublic provideContent(): string {\n\t\treturn this.provideContentAtIndex(this._focusedHoverPartIndex, false);\n\t}\n\n\tpublic get actions(): IAction[] {\n\t\tconst actions: IAction[] = [];\n\t\tactions.push(this._getActionFor(this._editor, HoverVerbosityAction.Increase));\n\t\tactions.push(this._getActionFor(this._editor, HoverVerbosityAction.Decrease));\n\t\treturn actions;\n\t}\n\n\tprivate _getActionFor(editor: ICodeEditor, action: HoverVerbosityAction): IAction {\n\t\tlet actionId: string;\n\t\tlet accessibleActionId: string;\n\t\tlet actionCodicon: ThemeIcon;\n\t\tswitch (action) {\n\t\t\tcase HoverVerbosityAction.Increase:\n\t\t\t\tactionId = INCREASE_HOVER_VERBOSITY_ACTION_ID;\n\t\t\t\taccessibleActionId = INCREASE_HOVER_VERBOSITY_ACCESSIBLE_ACTION_ID;\n\t\t\t\tactionCodicon = Codicon.add;\n\t\t\t\tbreak;\n\t\t\tcase HoverVerbosityAction.Decrease:\n\t\t\t\tactionId = DECREASE_HOVER_VERBOSITY_ACTION_ID;\n\t\t\t\taccessibleActionId = DECREASE_HOVER_VERBOSITY_ACCESSIBLE_ACTION_ID;\n\t\t\t\tactionCodicon = Codicon.remove;\n\t\t\t\tbreak;\n\t\t}\n\t\tconst actionLabel = labelForHoverVerbosityAction(this._keybindingService, action);\n\t\tconst actionEnabled = this._hoverController.doesHoverAtIndexSupportVerbosityAction(this._focusedHoverPartIndex, action);\n\t\treturn new Action(accessibleActionId, actionLabel, ThemeIcon.asClassName(actionCodicon), actionEnabled, () => {\n\t\t\teditor.getAction(actionId)?.run({ index: this._focusedHoverPartIndex, focus: false });\n\t\t});\n\t}\n\n\tprivate _initializeOptions(editor: ICodeEditor, hoverController: ContentHoverController): void {\n\t\tconst helpProvider = this._register(new HoverAccessibilityHelpProvider(hoverController));\n\t\tthis.options.language = editor.getModel()?.getLanguageId();\n\t\tthis.options.customHelp = () => { return helpProvider.provideContentAtIndex(this._focusedHoverPartIndex, true); };\n\t}\n}\n\nexport class ExtHoverAccessibleView implements IAccessibleViewImplementation {\n\tpublic readonly type = AccessibleViewType.View;\n\tpublic readonly priority = 90;\n\tpublic readonly name = 'extension-hover';\n\n\tgetProvider(accessor: ServicesAccessor): AccessibleContentProvider | undefined {\n\t\tconst contextViewService = accessor.get(IContextViewService);\n\t\tconst contextViewElement = contextViewService.getContextViewElement();\n\t\tconst extensionHoverContent = contextViewElement?.textContent ?? undefined;\n\t\tconst hoverService = accessor.get(IHoverService);\n\n\t\tif (contextViewElement.classList.contains('accessible-view-container') || !extensionHoverContent) {\n\t\t\t// The accessible view, itself, uses the context view service to display the text. We don't want to read that.\n\t\t\treturn;\n\t\t}\n\t\treturn new AccessibleContentProvider(\n\t\t\tAccessibleViewProviderId.Hover,\n\t\t\t{ language: 'typescript', type: AccessibleViewType.View },\n\t\t\t() => { return extensionHoverContent; },\n\t\t\t() => {\n\t\t\t\thoverService.showAndFocusLastHover();\n\t\t\t},\n\t\t\t'accessibility.verbosity.hover',\n\t\t);\n\t}\n}\n"]}