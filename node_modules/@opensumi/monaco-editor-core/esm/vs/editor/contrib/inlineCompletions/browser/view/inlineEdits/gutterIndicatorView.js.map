{"version":3,"sources":["vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/gutterIndicatorView.ts"],"names":[],"mappings":"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","file":"gutterIndicatorView.js","sourceRoot":"file:///Users/kw/github/monaco-editor-core/out-editor-esm","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { renderIcon } from '../../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { IObservable, ISettableObservable, autorun, constObservable, derived, observableFromEvent, observableValue } from '../../../../../../base/common/observable.js';\nimport { IHoverService } from '../../../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { buttonBackground, buttonForeground, buttonSecondaryBackground, buttonSecondaryForeground } from '../../../../../../platform/theme/common/colorRegistry.js';\nimport { registerColor, transparent } from '../../../../../../platform/theme/common/colorUtils.js';\nimport { ObservableCodeEditor } from '../../../../../browser/observableCodeEditor.js';\nimport { Rect } from '../../../../../browser/rect.js';\nimport { HoverService } from '../../../../../browser/services/hoverService/hoverService.js';\nimport { HoverWidget } from '../../../../../browser/services/hoverService/hoverWidget.js';\nimport { EditorOption } from '../../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../../common/core/offsetRange.js';\nimport { StickyScrollController } from '../../../../stickyScroll/browser/stickyScrollController.js';\nimport { InlineCompletionsModel } from '../../model/inlineCompletionsModel.js';\nimport { GutterIndicatorMenuContent } from './gutterIndicatorMenu.js';\nimport { mapOutFalsy, n, rectToProps } from './utils.js';\nimport { localize } from '../../../../../../nls.js';\nimport { trackFocus } from '../../../../../../base/browser/dom.js';\nimport { IAccessibilityService } from '../../../../../../platform/accessibility/common/accessibility.js';\nexport const inlineEditIndicatorPrimaryForeground = registerColor(\n\t'inlineEdit.gutterIndicator.primaryForeground',\n\tbuttonForeground,\n\tlocalize('inlineEdit.gutterIndicator.primaryForeground', 'Foreground color for the primary inline edit gutter indicator.')\n);\nexport const inlineEditIndicatorPrimaryBackground = registerColor(\n\t'inlineEdit.gutterIndicator.primaryBackground',\n\tbuttonBackground,\n\tlocalize('inlineEdit.gutterIndicator.primaryBackground', 'Background color for the primary inline edit gutter indicator.')\n);\n\nexport const inlineEditIndicatorSecondaryForeground = registerColor(\n\t'inlineEdit.gutterIndicator.secondaryForeground',\n\tbuttonSecondaryForeground,\n\tlocalize('inlineEdit.gutterIndicator.secondaryForeground', 'Foreground color for the secondary inline edit gutter indicator.')\n);\nexport const inlineEditIndicatorSecondaryBackground = registerColor(\n\t'inlineEdit.gutterIndicator.secondaryBackground',\n\tbuttonSecondaryBackground,\n\tlocalize('inlineEdit.gutterIndicator.secondaryBackground', 'Background color for the secondary inline edit gutter indicator.')\n);\n\nexport const inlineEditIndicatorsuccessfulForeground = registerColor(\n\t'inlineEdit.gutterIndicator.successfulForeground',\n\tbuttonForeground,\n\tlocalize('inlineEdit.gutterIndicator.successfulForeground', 'Foreground color for the successful inline edit gutter indicator.')\n);\nexport const inlineEditIndicatorsuccessfulBackground = registerColor(\n\t'inlineEdit.gutterIndicator.successfulBackground',\n\t{ light: '#2e825c', dark: '#2e825c', hcLight: '#2e825c', hcDark: '#2e825c' },\n\tlocalize('inlineEdit.gutterIndicator.successfulBackground', 'Background color for the successful inline edit gutter indicator.')\n);\n\nexport const inlineEditIndicatorBackground = registerColor(\n\t'inlineEdit.gutterIndicator.background',\n\t{\n\t\thcDark: transparent('tab.inactiveBackground', 0.5),\n\t\thcLight: transparent('tab.inactiveBackground', 0.5),\n\t\tdark: transparent('tab.inactiveBackground', 0.5),\n\t\tlight: '#5f5f5f18',\n\t},\n\tlocalize('inlineEdit.gutterIndicator.background', 'Background color for the inline edit gutter indicator.')\n);\n\nexport class InlineEditsGutterIndicator extends Disposable {\n\tconstructor(\n\t\tprivate readonly _editorObs: ObservableCodeEditor,\n\t\tprivate readonly _originalRange: IObservable<LineRange | undefined>,\n\t\tprivate readonly _verticalOffset: IObservable<number>,\n\t\tprivate readonly _model: IObservable<InlineCompletionsModel | undefined>,\n\t\tprivate readonly _isHoveringOverInlineEdit: IObservable<boolean>,\n\t\tprivate readonly _focusIsInMenu: ISettableObservable<boolean>,\n\t\t@IHoverService private readonly _hoverService: HoverService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._editorObs.createOverlayWidget({\n\t\t\tdomNode: this._indicator.element,\n\t\t\tposition: constObservable(null),\n\t\t\tallowEditorOverflow: false,\n\t\t\tminContentWidthInPx: constObservable(0),\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tif (!accessibilityService.isMotionReduced()) {\n\t\t\t\tthis._indicator.element.classList.toggle('wiggle', this._isHoveringOverInlineEdit.read(reader));\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate readonly _originalRangeObs = mapOutFalsy(this._originalRange);\n\n\tprivate readonly _state = derived(reader => {\n\t\tconst range = this._originalRangeObs.read(reader);\n\t\tif (!range) { return undefined; }\n\t\treturn {\n\t\t\trange,\n\t\t\tlineOffsetRange: this._editorObs.observeLineOffsetRange(range, this._store),\n\t\t};\n\t});\n\n\tprivate readonly _stickyScrollController = StickyScrollController.get(this._editorObs.editor);\n\tprivate readonly _stickyScrollHeight = this._stickyScrollController\n\t\t? observableFromEvent(this._stickyScrollController.onDidChangeStickyScrollHeight, () => this._stickyScrollController!.stickyScrollWidgetHeight)\n\t\t: constObservable(0);\n\n\tprivate readonly _layout = derived(reader => {\n\t\tconst s = this._state.read(reader);\n\t\tif (!s) { return undefined; }\n\n\t\tconst layout = this._editorObs.layoutInfo.read(reader);\n\n\t\tconst bottomPadding = 1;\n\t\tconst fullViewPort = Rect.fromLeftTopRightBottom(0, 0, layout.width, layout.height - bottomPadding);\n\t\tconst viewPortWithStickyScroll = fullViewPort.withTop(this._stickyScrollHeight.read(reader));\n\n\t\tconst targetVertRange = s.lineOffsetRange.read(reader);\n\n\t\tconst space = 1;\n\n\t\tconst targetRect = Rect.fromRanges(OffsetRange.fromTo(space + layout.glyphMarginLeft, layout.lineNumbersLeft + layout.lineNumbersWidth + 4), targetVertRange);\n\n\n\t\tconst lineHeight = this._editorObs.getOption(EditorOption.lineHeight).read(reader);\n\t\tconst pillOffset = this._verticalOffset.read(reader);\n\t\tconst pillRect = targetRect.withHeight(lineHeight).withWidth(22).moveDown(pillOffset);\n\t\tconst pillRectMoved = pillRect.moveToBeContainedIn(viewPortWithStickyScroll);\n\n\t\tconst rect = targetRect;\n\n\t\tconst iconRect = (targetRect.containsRect(pillRectMoved))\n\t\t\t? pillRectMoved\n\t\t\t: pillRectMoved.moveToBeContainedIn(fullViewPort.intersect(targetRect.union(fullViewPort.withHeight(lineHeight)))!); //viewPortWithStickyScroll.intersect(rect)!;\n\n\t\treturn {\n\t\t\trect,\n\t\t\ticonRect,\n\t\t\tarrowDirection: (targetRect.containsRect(iconRect) ? 'right' as const\n\t\t\t\t: iconRect.top > targetRect.top ? 'top' as const : 'bottom' as const),\n\t\t\tdocked: rect.containsRect(iconRect) && viewPortWithStickyScroll.containsRect(iconRect),\n\t\t};\n\t});\n\n\tprivate readonly _tabAction = derived(this, reader => {\n\t\tconst m = this._model.read(reader);\n\t\tif (this._editorObs.isFocused.read(reader)) {\n\t\t\tif (m && m.tabShouldJumpToInlineEdit.read(reader)) { return 'jump' as const; }\n\t\t\tif (m && m.tabShouldAcceptInlineEdit.read(reader)) { return 'accept' as const; }\n\t\t}\n\t\treturn 'inactive' as const;\n\t});\n\n\tprivate readonly _iconRef = n.ref<HTMLDivElement>();\n\tprivate _hoverVisible: boolean = false;\n\tprivate readonly _isHoveredOverIcon = observableValue(this, false);\n\n\tprivate _showHover(): void {\n\t\tif (this._hoverVisible) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst displayName = derived(this, reader => {\n\t\t\tconst state = this._model.read(reader)?.inlineEditState;\n\t\t\tconst item = state?.read(reader);\n\t\t\tconst completionSource = item?.inlineCompletion?.source;\n\t\t\t// TODO: expose the provider (typed) and expose the provider the edit belongs totyping and get correct edit\n\t\t\tconst displayName = (completionSource?.inlineCompletions as any).edits[0]?.provider?.displayName ?? localize('inlineEdit', \"Inline Edit\");\n\t\t\treturn displayName;\n\t\t});\n\n\t\tconst disposableStore = new DisposableStore();\n\t\tconst content = disposableStore.add(this._instantiationService.createInstance(\n\t\t\tGutterIndicatorMenuContent,\n\t\t\tdisplayName,\n\t\t\tthis._tabAction,\n\t\t\t(focusEditor) => {\n\t\t\t\tif (focusEditor) {\n\t\t\t\t\tthis._editorObs.editor.focus();\n\t\t\t\t}\n\t\t\t\th?.dispose();\n\t\t\t},\n\t\t\tthis._model.map((m, r) => m?.state.read(r)?.inlineCompletion?.source.inlineCompletions.commands),\n\t\t).toDisposableLiveElement());\n\n\t\tconst focusTracker = disposableStore.add(trackFocus(content.element));\n\t\tdisposableStore.add(focusTracker.onDidBlur(() => this._focusIsInMenu.set(false, undefined)));\n\t\tdisposableStore.add(focusTracker.onDidFocus(() => this._focusIsInMenu.set(true, undefined)));\n\t\tdisposableStore.add(toDisposable(() => this._focusIsInMenu.set(false, undefined)));\n\n\t\tconst h = this._hoverService.showHover({\n\t\t\ttarget: this._iconRef.element,\n\t\t\tcontent: content.element,\n\t\t}) as HoverWidget | undefined;\n\t\tif (h) {\n\t\t\tthis._hoverVisible = true;\n\t\t\th.onDispose(() => { // TODO:@hediet fix leak\n\t\t\t\tdisposableStore.dispose();\n\t\t\t\tthis._hoverVisible = false;\n\t\t\t});\n\t\t} else {\n\t\t\tdisposableStore.dispose();\n\t\t}\n\t}\n\n\tprivate readonly _indicator = n.div({\n\t\tclass: 'inline-edits-view-gutter-indicator',\n\t\tonclick: () => {\n\t\t\tconst model = this._model.get();\n\t\t\tif (!model) { return; }\n\t\t\tconst docked = this._layout.map(l => l && l.docked).get();\n\t\t\tthis._editorObs.editor.focus();\n\t\t\tif (docked) {\n\t\t\t\tmodel.accept();\n\t\t\t} else {\n\t\t\t\tmodel.jump();\n\t\t\t}\n\t\t},\n\t\ttabIndex: 0,\n\t\tstyle: {\n\t\t\tposition: 'absolute',\n\t\t\toverflow: 'visible',\n\t\t},\n\t}, mapOutFalsy(this._layout).map(layout => !layout ? [] : [\n\t\tn.div({\n\t\t\tstyle: {\n\t\t\t\tposition: 'absolute',\n\t\t\t\tbackground: 'var(--vscode-inlineEdit-gutterIndicator-background)',\n\t\t\t\tborderRadius: '4px',\n\t\t\t\t...rectToProps(reader => layout.read(reader).rect),\n\t\t\t}\n\t\t}),\n\t\tn.div({\n\t\t\tclass: 'icon',\n\t\t\tref: this._iconRef,\n\t\t\tonmouseenter: () => {\n\t\t\t\t// TODO show hover when hovering ghost text etc.\n\t\t\t\tthis._isHoveredOverIcon.set(true, undefined);\n\t\t\t\tthis._showHover();\n\t\t\t},\n\t\t\tonmouseleave: () => { this._isHoveredOverIcon.set(false, undefined); },\n\t\t\tstyle: {\n\t\t\t\tcursor: 'pointer',\n\t\t\t\tzIndex: '1000',\n\t\t\t\tposition: 'absolute',\n\t\t\t\tbackgroundColor: this._tabAction.map(v => {\n\t\t\t\t\tswitch (v) {\n\t\t\t\t\t\tcase 'inactive': return 'var(--vscode-inlineEdit-gutterIndicator-secondaryBackground)';\n\t\t\t\t\t\tcase 'jump': return 'var(--vscode-inlineEdit-gutterIndicator-primaryBackground)';\n\t\t\t\t\t\tcase 'accept': return 'var(--vscode-inlineEdit-gutterIndicator-successfulBackground)';\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t['--vscodeIconForeground' as any]: this._tabAction.map(v => {\n\t\t\t\t\tswitch (v) {\n\t\t\t\t\t\tcase 'inactive': return 'var(--vscode-inlineEdit-gutterIndicator-secondaryForeground)';\n\t\t\t\t\t\tcase 'jump': return 'var(--vscode-inlineEdit-gutterIndicator-primaryForeground)';\n\t\t\t\t\t\tcase 'accept': return 'var(--vscode-inlineEdit-gutterIndicator-successfulForeground)';\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tborderRadius: '4px',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tjustifyContent: 'center',\n\t\t\t\ttransition: 'background-color 0.2s ease-in-out',\n\t\t\t\t...rectToProps(reader => layout.read(reader).iconRect),\n\t\t\t}\n\t\t}, [\n\t\t\tn.div({\n\t\t\t\tstyle: {\n\t\t\t\t\trotate: layout.map(l => {\n\t\t\t\t\t\tswitch (l.arrowDirection) {\n\t\t\t\t\t\t\tcase 'right': return '0deg';\n\t\t\t\t\t\t\tcase 'bottom': return '90deg';\n\t\t\t\t\t\t\tcase 'top': return '-90deg';\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\ttransition: 'rotate 0.2s ease-in-out',\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\talignItems: 'center',\n\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t}\n\t\t\t}, [\n\t\t\t\tthis._tabAction.map(v => v === 'accept' ? renderIcon(Codicon.keyboardTab) : renderIcon(Codicon.arrowRight))\n\t\t\t])\n\t\t]),\n\t])).keepUpdated(this._store);\n}\n"]}